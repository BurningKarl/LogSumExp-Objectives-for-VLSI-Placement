%% Page breaking
% Penalty for page-break after first line of paragraph (default: 150)
\clubpenalty=150
% Penalty for page-break before last line of paragraph (default: 150)
\widowpenalty=150
% Extra penalty for page-break after hyphenated line (default: 100)
\brokenpenalty=0

%% Line breaking
% Single line tolerance for first pass breaking at spaces (default: 100)
\pretolerance=200
% Single line tolerance for second pass breaking with hyphens (default: 200)
\tolerance=1600

%% Logging
% Since we increased acceptance of line-breaking in general,
% we only report underful boxes outside the adapted tolerance.
\hbadness=\tolerance

%% Ams formulas
% Make \left, \right brackets a bit larger than their content.
% Consequently, stacked such brackets will grow in size.
% \delimitershortfall=-.5pt
% Allow page-breaking in aligned formulas
\allowdisplaybreaks

% Always use the mleft / mright variants instead of left / right to improve spacing.
\mleftright

% End proofs with filled square
%\renewcommand\qedsymbol{$\blacksquare$}

% Equivalent to \qedhere (used in align or equivalent). Aligns \qedsymbol with bottom of line rather than middle.
% For details cf. https://tex.stackexchange.com/q/434373/88444.
\newcommand{\qedalign}[1][&]{\\[-0.82\baselineskip]#1\qedhere}


%% Misc
% Add parenthesis to all references to subfigures
\renewcommand\thesubfigure{(\alph{subfigure})}

% Include sections in table of contents, but don't go deeper
\setcounter{tocdepth}{1}

%% Page Layout
% \pagestyle{fancy}
% \fancyhead[LE,RO]{\thepage}
% \fancyhead[RE]{\textsl{\leftmark}}
% \fancyhead[LO]{\textsl{\rightmark}}
% \renewcommand{\headrulewidth}{0pt}
% \renewcommand{\footrulewidth}{0pt}
% \cfoot{}

% Add git status to page foot
% \subimport{build/}{git-description.tex}  % load generated description
% \providecommand{\gitDescription}{Unknown \texttt{git} status}  % provide fallback
% \fancyfoot[LE,RO]{\textcolor{gray50}{[{\footnotesize \gitDescription{}}]}}

% Link configuration
\hypersetup{
 colorlinks = false,
 citebordercolor = dark_green,
 linkbordercolor = blue,
 urlbordercolor = blue,
}

% Layout algorithm2e functions as textsf (instead of bold).
\SetFuncSty{textsf}

% Try harder to compress cref ranges (found in cleveref manual)
\crefrangelabelformat{equation}{(#3#1#4--#5\crefstripprefix{#1}{#2}#6)}
\crefrangelabelformat{subequation}{(#3#1#4--#5\crefstripprefix{#1}{#2}#6)}
\crefmultiformat{figure}%
{\edef\crefstripprefixinfo{#1}figs.~#2#1#3}%
{ and~#2\crefstripprefix{\crefstripprefixinfo}{#1}#3}%
{, #2\crefstripprefix{\crefstripprefixinfo}{#1}#3}%
{, and~#2\crefstripprefix{\crefstripprefixinfo}{#1}#3}

%% Backup from ancient times
% \setlength{\leftmargini}{16pt} % adjust left margin for enum/item
% \captionsetup{aboveskip=04pt,belowskip=00pt,font=scriptsize,labelfont=bf}
% \renewcommand*{\bibfont}{\scriptsize} % fontsize for references (\normal > \small > \footnotesize > \scriptsize > \tiny)
% \renewcommand\thesubfigure{(\arabic{subfigure})} % numbered subfigs

